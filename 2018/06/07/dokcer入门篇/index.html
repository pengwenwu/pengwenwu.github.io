<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    <title>dokcer入门篇 | Pena&#39;s Blog | 莫道君行早，更有早行人</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Docker">
    <meta name="description" content="阅读《Docker — 从入门到实践》    windows使用 下载docker for windows，安装  使用镜像加速，我自己使用的是阿里云镜像加速setting-&amp;gt;Daemon-&amp;gt;Registry mirrors-&amp;gt;粘贴自己的加速器地址  可以使用gui界面，Kitematic  常用命令获取镜像可以使用docker pull --help查看1234docker">
<meta name="keywords" content="Docker">
<meta property="og:type" content="article">
<meta property="og:title" content="dokcer入门篇">
<meta property="og:url" content="https://pengwenwu.github.io/2018/06/07/dokcer入门篇/index.html">
<meta property="og:site_name" content="Pena&#39;s Blog">
<meta property="og:description" content="阅读《Docker — 从入门到实践》    windows使用 下载docker for windows，安装  使用镜像加速，我自己使用的是阿里云镜像加速setting-&amp;gt;Daemon-&amp;gt;Registry mirrors-&amp;gt;粘贴自己的加速器地址  可以使用gui界面，Kitematic  常用命令获取镜像可以使用docker pull --help查看1234docker">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-06-07T12:56:30.005Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="dokcer入门篇">
<meta name="twitter:description" content="阅读《Docker — 从入门到实践》    windows使用 下载docker for windows，安装  使用镜像加速，我自己使用的是阿里云镜像加速setting-&amp;gt;Daemon-&amp;gt;Registry mirrors-&amp;gt;粘贴自己的加速器地址  可以使用gui界面，Kitematic  常用命令获取镜像可以使用docker pull --help查看1234docker">
    
        <link rel="alternate" type="application/atom+xml" title="Pena&#39;s Blog" href="/atom.xml">
    
    <link rel="shortcut icon" href="/favicon.jpg">
    <link rel="stylesheet" href="/css/style.css?v=1.7.1">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">pengwenwu</h5>
          <a href="mailto:pww932589183@163.com" title="pww932589183@163.com" class="mail">pww932589183@163.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                Home
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                Archives
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                Tags
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                Categories
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/pengwenwu" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">dokcer入门篇</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">dokcer入门篇</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-06-07T12:35:34.000Z" itemprop="datePublished" class="page-time">
  2018-06-07
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/后端/">后端</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#windows使用"><span class="post-toc-number">1.</span> <span class="post-toc-text">windows使用</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#常用命令"><span class="post-toc-number">2.</span> <span class="post-toc-text">常用命令</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#获取镜像"><span class="post-toc-number">2.1.</span> <span class="post-toc-text">获取镜像</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#运行"><span class="post-toc-number">2.2.</span> <span class="post-toc-text">运行</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#镜像列表"><span class="post-toc-number">2.3.</span> <span class="post-toc-text">镜像列表</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#镜像大小"><span class="post-toc-number">2.4.</span> <span class="post-toc-text">镜像大小</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#删除镜像"><span class="post-toc-number">2.5.</span> <span class="post-toc-text">删除镜像</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#启动已终止的container镜像"><span class="post-toc-number">2.6.</span> <span class="post-toc-text">启动已终止的container镜像</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#后台运行容器"><span class="post-toc-number">2.7.</span> <span class="post-toc-text">后台运行容器</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#终止运行"><span class="post-toc-number">2.8.</span> <span class="post-toc-text">终止运行</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#进入容器"><span class="post-toc-number">2.9.</span> <span class="post-toc-text">进入容器</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#删除容器"><span class="post-toc-number">2.10.</span> <span class="post-toc-text">删除容器</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#commit"><span class="post-toc-number">2.11.</span> <span class="post-toc-text">commit</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Dokcerfile-定制镜像"><span class="post-toc-number">2.12.</span> <span class="post-toc-text">Dokcerfile 定制镜像</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#FROM指定基础镜像"><span class="post-toc-number">2.12.1.</span> <span class="post-toc-text">FROM指定基础镜像</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#RUN执行命令"><span class="post-toc-number">2.12.2.</span> <span class="post-toc-text">RUN执行命令</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#构建镜像"><span class="post-toc-number">2.13.</span> <span class="post-toc-text">构建镜像</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Dockerfile-指令详解"><span class="post-toc-number">2.14.</span> <span class="post-toc-text">Dockerfile 指令详解</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#CMD-启动命令"><span class="post-toc-number">2.14.1.</span> <span class="post-toc-text">CMD 启动命令</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ENTRYPOINT-入口点"><span class="post-toc-number">2.14.2.</span> <span class="post-toc-text">ENTRYPOINT 入口点</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#场景一：让镜像变成像命令一样使用"><span class="post-toc-number">2.14.2.1.</span> <span class="post-toc-text">场景一：让镜像变成像命令一样使用</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#场景二：应用运行前的准备工作"><span class="post-toc-number">2.14.2.2.</span> <span class="post-toc-text">场景二：应用运行前的准备工作</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ENV-设置环境变量"><span class="post-toc-number">2.14.3.</span> <span class="post-toc-text">ENV 设置环境变量</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ARG构建参数"><span class="post-toc-number">2.14.4.</span> <span class="post-toc-text">ARG构建参数</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#VOLUME-定义匿名卷"><span class="post-toc-number">2.14.5.</span> <span class="post-toc-text">VOLUME 定义匿名卷</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#EXPOSE-声明端口"><span class="post-toc-number">2.14.6.</span> <span class="post-toc-text">EXPOSE 声明端口</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#WORKDIR-指定工作目录"><span class="post-toc-number">2.14.7.</span> <span class="post-toc-text">WORKDIR 指定工作目录</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#USER-指定当前用户"><span class="post-toc-number">2.14.8.</span> <span class="post-toc-text">USER 指定当前用户</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HEALTHCHECK-健康检查"><span class="post-toc-number">2.14.9.</span> <span class="post-toc-text">HEALTHCHECK 健康检查</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ONBUILD"><span class="post-toc-number">2.14.10.</span> <span class="post-toc-text">ONBUILD</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#推送镜像"><span class="post-toc-number">2.15.</span> <span class="post-toc-text">推送镜像</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#配置私有仓库"><span class="post-toc-number">2.16.</span> <span class="post-toc-text">配置私有仓库</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#数据卷"><span class="post-toc-number">2.17.</span> <span class="post-toc-text">数据卷</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#外部访问容器"><span class="post-toc-number">2.18.</span> <span class="post-toc-text">外部访问容器</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#查看映射端口配置"><span class="post-toc-number">2.18.1.</span> <span class="post-toc-text">查看映射端口配置</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#容器互联"><span class="post-toc-number">2.19.</span> <span class="post-toc-text">容器互联</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#查看已有网络"><span class="post-toc-number">2.19.1.</span> <span class="post-toc-text">查看已有网络</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#新建网络"><span class="post-toc-number">2.19.2.</span> <span class="post-toc-text">新建网络</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#连接容器"><span class="post-toc-number">2.19.3.</span> <span class="post-toc-text">连接容器</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Compose-项目"><span class="post-toc-number">3.</span> <span class="post-toc-text">Compose 项目</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Compose-命令说明"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">Compose 命令说明</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#命令对象与格式"><span class="post-toc-number">3.1.1.</span> <span class="post-toc-text">命令对象与格式</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#命令选项"><span class="post-toc-number">3.1.2.</span> <span class="post-toc-text">命令选项</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#命令使用说明"><span class="post-toc-number">3.1.3.</span> <span class="post-toc-text">命令使用说明</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#build"><span class="post-toc-number">3.1.3.1.</span> <span class="post-toc-text">build</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#config"><span class="post-toc-number">3.1.3.2.</span> <span class="post-toc-text">config</span></a></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#down"><span class="post-toc-number">3.1.4.</span> <span class="post-toc-text">down</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#exec"><span class="post-toc-number">3.1.5.</span> <span class="post-toc-text">exec</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#images"><span class="post-toc-number">3.1.6.</span> <span class="post-toc-text">images</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#kill"><span class="post-toc-number">3.1.7.</span> <span class="post-toc-text">kill</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#logs"><span class="post-toc-number">3.1.8.</span> <span class="post-toc-text">logs</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#pause"><span class="post-toc-number">3.1.9.</span> <span class="post-toc-text">pause</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#port"><span class="post-toc-number">3.1.10.</span> <span class="post-toc-text">port</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#ps"><span class="post-toc-number">3.1.11.</span> <span class="post-toc-text">ps</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#pull"><span class="post-toc-number">3.1.12.</span> <span class="post-toc-text">pull</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#push"><span class="post-toc-number">3.1.13.</span> <span class="post-toc-text">push</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#restart"><span class="post-toc-number">3.1.14.</span> <span class="post-toc-text">restart</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#stop"><span class="post-toc-number">3.1.15.</span> <span class="post-toc-text">stop</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#rm"><span class="post-toc-number">3.1.16.</span> <span class="post-toc-text">rm</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#run"><span class="post-toc-number">3.1.17.</span> <span class="post-toc-text">run</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#scale"><span class="post-toc-number">3.1.18.</span> <span class="post-toc-text">scale</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#top"><span class="post-toc-number">3.1.19.</span> <span class="post-toc-text">top</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#unpause"><span class="post-toc-number">3.1.20.</span> <span class="post-toc-text">unpause</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#up"><span class="post-toc-number">3.1.21.</span> <span class="post-toc-text">up</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Compose-模板文件"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">Compose 模板文件</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#build-1"><span class="post-toc-number">3.2.1.</span> <span class="post-toc-text">build</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#cap-add-cap-drop"><span class="post-toc-number">3.2.2.</span> <span class="post-toc-text">cap_add, cap_drop</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#command"><span class="post-toc-number">3.2.3.</span> <span class="post-toc-text">command</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#container-name"><span class="post-toc-number">3.2.4.</span> <span class="post-toc-text">container_name</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#devices"><span class="post-toc-number">3.2.5.</span> <span class="post-toc-text">devices</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#depends-on"><span class="post-toc-number">3.2.6.</span> <span class="post-toc-text">depends_on</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#dns"><span class="post-toc-number">3.2.7.</span> <span class="post-toc-text">dns</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#env-file"><span class="post-toc-number">3.2.8.</span> <span class="post-toc-text">env_file</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#environment"><span class="post-toc-number">3.2.9.</span> <span class="post-toc-text">environment</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#expose"><span class="post-toc-number">3.2.10.</span> <span class="post-toc-text">expose</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#image"><span class="post-toc-number">3.2.11.</span> <span class="post-toc-text">image</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#读取变量"><span class="post-toc-number">3.2.12.</span> <span class="post-toc-text">读取变量</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#附录"><span class="post-toc-number">4.</span> <span class="post-toc-text">附录</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#常见问题总结"><span class="post-toc-number">4.1.</span> <span class="post-toc-text">常见问题总结</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#资源链接"><span class="post-toc-number">4.2.</span> <span class="post-toc-text">资源链接</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#进阶深入"><span class="post-toc-number">4.3.</span> <span class="post-toc-text">进阶深入</span></a></li></ol></li></ol>
        </nav>
    </aside>
    
<article id="post-dokcer入门篇"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">dokcer入门篇</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-06-07 20:35:34" datetime="2018-06-07T12:35:34.000Z"  itemprop="datePublished">2018-06-07</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/后端/">后端</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <blockquote>
<p><a href="https://docker_practice.gitee.io/" target="_blank" rel="noopener">阅读《Docker — 从入门到实践》</a>  </p>
</blockquote>
<h1 id="windows使用"><a href="#windows使用" class="headerlink" title="windows使用"></a>windows使用</h1><ul>
<li>下载docker for windows，安装 </li>
<li>使用镜像加速，我自己使用的是<a href="https://cr.console.aliyun.com/#/accelerator" target="_blank" rel="noopener">阿里云镜像加速</a>setting-&gt;Daemon-&gt;Registry mirrors-&gt;粘贴自己的加速器地址 </li>
<li>可以使用gui界面，Kitematic</li>
</ul>
<h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><h2 id="获取镜像"><a href="#获取镜像" class="headerlink" title="获取镜像"></a>获取镜像</h2><p>可以使用<code>docker pull --help</code>查看<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker pull [选项] [Docker Registry 地址[:端口号]/]仓库名[:标签]</span><br><span class="line"></span><br><span class="line"><span class="comment"># etc</span></span><br><span class="line">docker pull ubuntu:16.04</span><br></pre></td></tr></table></figure></p>
<h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm ubuntu:16.04 bash</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看当前系统版本</span></span><br><span class="line">cat /etc/os-release</span><br></pre></td></tr></table></figure>
<ul>
<li><code>-it</code>: <code>-i</code>: 交互式操作, <code>-t</code>: 终端 </li>
<li><code>--rm</code>: 执行退出后删除该容器实例</li>
<li><code>bash</code>: shell使用的方式 </li>
</ul>
<h2 id="镜像列表"><a href="#镜像列表" class="headerlink" title="镜像列表"></a>镜像列表</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker image ls</span><br><span class="line"></span><br><span class="line"><span class="comment"># etc</span></span><br><span class="line">REPOSITORY TAG IMAGE ID CREATED SIZE</span><br></pre></td></tr></table></figure>
<p>各列意义：<code>仓库名</code>, <code>标签</code>, <code>镜像id</code>, <code>创建时间</code>, <code>解压后文件大小</code><br><strong>镜像ID 则是镜像的唯一标识，一个镜像可以对应多个标签</strong> </p>
<h2 id="镜像大小"><a href="#镜像大小" class="headerlink" title="镜像大小"></a>镜像大小</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker system df</span><br></pre></td></tr></table></figure>
<h2 id="删除镜像"><a href="#删除镜像" class="headerlink" title="删除镜像"></a>删除镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker image rm [选项] &lt;镜像1&gt; [&lt;镜像2&gt; ...]</span><br></pre></td></tr></table></figure>
<h2 id="启动已终止的container镜像"><a href="#启动已终止的container镜像" class="headerlink" title="启动已终止的container镜像"></a>启动已终止的container镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker [container] start</span><br></pre></td></tr></table></figure>
<h2 id="后台运行容器"><a href="#后台运行容器" class="headerlink" title="后台运行容器"></a>后台运行容器</h2><p><code>-d</code>参数能够让容器后台运行，保证输出结果不会打印出来。但容器是否长久运行（一直后台挂起），跟<code>-d</code>参数无关，需要一直有指令执行，才不会“秒退”<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -c exec执行</span></span><br><span class="line">docker run ubuntu:17.10 /bin/sh -c <span class="string">"while true; do echo hello world; sleep 1; done"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 后台运行</span></span><br><span class="line">docker run -d ubuntu:17.10 /bin/sh -c <span class="string">"while true; do echo hello world; sleep 1; done"</span></span><br></pre></td></tr></table></figure></p>
<p>可以通过<code>docker [container] logs</code>去查看容器输出信息 </p>
<h2 id="终止运行"><a href="#终止运行" class="headerlink" title="终止运行"></a>终止运行</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker [contanier] stop</span><br></pre></td></tr></table></figure>
<h2 id="进入容器"><a href="#进入容器" class="headerlink" title="进入容器"></a>进入容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker attach </span><br><span class="line"></span><br><span class="line"><span class="comment"># 推荐使用</span></span><br><span class="line">docker <span class="built_in">exec</span> -it [container id] /bin/bash</span><br></pre></td></tr></table></figure>
<p>两者的区别：前者exit退出后，会停止当前容器；而<code>exec</code>仍然会保持运行 </p>
<h2 id="删除容器"><a href="#删除容器" class="headerlink" title="删除容器"></a>删除容器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker container rm </span><br><span class="line"></span><br><span class="line"><span class="comment"># 清楚所有处于终止状态的容器</span></span><br><span class="line">docker container prune</span><br></pre></td></tr></table></figure>
<h2 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h2><p><strong>为什么不建议使用<code>docker commit</code>?</strong><br>使用<code>docker commit</code>提交后，对于其他使用者而言，这个image镜像是一个黑箱，别人无处得知执行过什么命令、如何生成的镜像 </p>
<h2 id="Dokcerfile-定制镜像"><a href="#Dokcerfile-定制镜像" class="headerlink" title="Dokcerfile 定制镜像"></a>Dokcerfile 定制镜像</h2><h3 id="FROM指定基础镜像"><a href="#FROM指定基础镜像" class="headerlink" title="FROM指定基础镜像"></a>FROM指定基础镜像</h3><h3 id="RUN执行命令"><a href="#RUN执行命令" class="headerlink" title="RUN执行命令"></a>RUN执行命令</h3><ul>
<li>shell格式：<code>RUN &lt;命令&gt;</code> </li>
<li>exec格式：<code>RUN [&quot;可执行文件&quot;, &quot;参数1&quot;, &quot;参数2&quot;]</code> </li>
</ul>
<h2 id="构建镜像"><a href="#构建镜像" class="headerlink" title="构建镜像"></a>构建镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker build [选项] &lt;上下文路径/URL/-&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># etc, 注意镜像构建上下文(context)</span></span><br><span class="line">docker build -t nginx:v3 .</span><br></pre></td></tr></table></figure>
<h2 id="Dockerfile-指令详解"><a href="#Dockerfile-指令详解" class="headerlink" title="Dockerfile 指令详解"></a>Dockerfile 指令详解</h2><h3 id="CMD-启动命令"><a href="#CMD-启动命令" class="headerlink" title="CMD 启动命令"></a>CMD 启动命令</h3><p><code>CMD</code> 指令就是用于指定默认的容器主进程的启动命令的，也分为<code>shell</code>格式以及<code>exec</code>格式 </p>
<ul>
<li>shell格式：CMD &lt;命令&gt; </li>
<li>exec格式：CMD [“可执行文件”, “参数1”, “参数2”…] </li>
<li>参数列表格式：CMD [“参数1”, “参数2”…]。在指定了 ENTRYPOINT 指令后，用 CMD 指定具体的参数 </li>
</ul>
<p>一般<code>推荐</code>使用<code>exec</code>格式，这类格式在解析时会被解析成JSON数组，因此要使用<code>双引号</code> </p>
<p>如果是<code>shell</code>格式，实际会被包装成<code>sh -c</code>的格式<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CMD <span class="built_in">echo</span> <span class="variable">$HOME</span></span><br></pre></td></tr></table></figure></p>
<p>实际执行会变成：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CMD [ <span class="string">"sh"</span>, <span class="string">"-c"</span>, <span class="string">"echo <span class="variable">$HOME</span>"</span> ]</span><br></pre></td></tr></table></figure></p>
<p><strong>注意</strong>：Docker不是虚拟机，容器中的应用都是<code>前台执行</code>，没有后台服务的概念 </p>
<p>错误示范：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CMD service nginx start</span><br></pre></td></tr></table></figure></p>
<p>这里容器执行后会秒退出，因为上面的命令会被转化为<code>CMD [&quot;sh&quot;, &quot;-c&quot;, &quot;service nginx start]</code>，主进程是<code>sh</code>，当service nginx start执行结束后，sh也就结束了，sh作为主进程结束，所以容器也会退出</p>
<p>正确做法：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CMD [ <span class="string">"nginx"</span>, <span class="string">"-g"</span>, <span class="string">"daemon off;"</span> ]</span><br></pre></td></tr></table></figure></p>
<p>这边执行<code>docker run</code>的时候，不需要再跟<code>/bin/bash</code>启动命令，因为会覆盖。否则就是秒结束进程</p>
<h3 id="ENTRYPOINT-入口点"><a href="#ENTRYPOINT-入口点" class="headerlink" title="ENTRYPOINT 入口点"></a>ENTRYPOINT 入口点</h3><p>如果指定了<code>ENTRYPOINT</code>，<code>CMD</code>就不会直接执行命令，而是讲内容作为参数传给<code>ENTRYPOINT</code>，实际执行指令会变为：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ENTRYPOINT <span class="string">"&lt;CMD&gt;"</span></span><br></pre></td></tr></table></figure></p>
<h4 id="场景一：让镜像变成像命令一样使用"><a href="#场景一：让镜像变成像命令一样使用" class="headerlink" title="场景一：让镜像变成像命令一样使用"></a>场景一：让镜像变成像命令一样使用</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run myip -i</span><br></pre></td></tr></table></figure>
<h4 id="场景二：应用运行前的准备工作"><a href="#场景二：应用运行前的准备工作" class="headerlink" title="场景二：应用运行前的准备工作"></a>场景二：应用运行前的准备工作</h4><p>在启动主进程之前，需要一些准备工作，比如数据库的配置、初始化 </p>
<h3 id="ENV-设置环境变量"><a href="#ENV-设置环境变量" class="headerlink" title="ENV 设置环境变量"></a>ENV 设置环境变量</h3><p>两种格式：</p>
<ul>
<li>ENV \<key\> \<value\></value\></key\></li>
<li>ENV \<key1\>=\<value1\> \<key2>=\<value2\> … <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 含有空格的值使用双引号</span></span><br><span class="line">ENV VERSION=1.0 DEBUG=on \</span><br><span class="line">    NAME=<span class="string">"Happy Feet"</span></span><br></pre></td></tr></table></figure>
</value2\></key2></value1\></key1\></li>
</ul>
<h3 id="ARG构建参数"><a href="#ARG构建参数" class="headerlink" title="ARG构建参数"></a>ARG构建参数</h3><p>格式：<code>ARG &lt;参数名&gt;[=&lt;默认值&gt;]</code> </p>
<p>构建参数和ENV效果一样，都是设置环境变量，唯一的区别是，<code>ARG</code>构建的环境变量，在将来容器运行的时候，不会存储这些环境变量 </p>
<p><code>Dokcerfile</code>中的<code>ARG</code>指令是定义参数名称，以及其默认值。可以通过构建命令<code>docker build</code>中用<code>--build-arg &lt;参数名&gt;=&lt;值&gt;</code>来覆盖 </p>
<h3 id="VOLUME-定义匿名卷"><a href="#VOLUME-定义匿名卷" class="headerlink" title="VOLUME 定义匿名卷"></a>VOLUME 定义匿名卷</h3><p>格式为：</p>
<ul>
<li>VOLUME [“&lt;路径1&gt;”, “&lt;路径2&gt;”…]</li>
<li>VOLUME &lt;路径&gt; </li>
</ul>
<p>容器运行时应该尽量保持容器存储层不发生写操作，对于数据库类需要保存动态数据的应用，其数据库文件应该保存于卷(volume)中 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">VOLUME /data</span><br></pre></td></tr></table></figure>
<p>这里的 /data 目录就会在运行时自动挂载为匿名卷，任何向 /data 中写入的信息都不会记录进容器存储层，从而保证了容器存储层的无状态化 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -v mydata:/data xxxx</span><br></pre></td></tr></table></figure>
<p>这里mydata 这个命名卷挂载到了 /data 这个位置，替代了 Dockerfile 中定义的匿名卷的挂载配置 </p>
<h3 id="EXPOSE-声明端口"><a href="#EXPOSE-声明端口" class="headerlink" title="EXPOSE 声明端口"></a>EXPOSE 声明端口</h3><p>格式为：<code>EXPOSE &lt;端口1&gt; [&lt;端口2&gt;...]</code> </p>
<p><code>EXPOSE</code> 指令是声明运行时容器提供服务端口，这只是一个声明，在运行时并不会因为这个声明应用就会开启这个端口的服务。在 Dockerfile 中写入这样的声明有两个好处: </p>
<ul>
<li>帮助镜像使用者理解这个镜像服务的守护端口，以方便配置映射 </li>
<li>在运行时使用随机端口映射时，也就是 <code>docker run -P</code> 时，会自动随机映射 <code>EXPOSE</code> 的端口 </li>
</ul>
<p>要将 <code>EXPOSE</code> 和在运行时使用 <code>-p &lt;宿主端口&gt;:&lt;容器端口&gt;</code> 区分开来。-p，是映射宿主端口和容器端口，换句话说，就是将容器的对应端口服务公开给外界访问，而 EXPOSE 仅仅是声明容器打算使用什么端口而已，并不会自动在宿主进行端口映射。 </p>
<h3 id="WORKDIR-指定工作目录"><a href="#WORKDIR-指定工作目录" class="headerlink" title="WORKDIR 指定工作目录"></a>WORKDIR 指定工作目录</h3><p>格式为: <code>WORKDIR &lt;工作目录路径&gt;</code> </p>
<p>使用 <code>WORKDIR</code> 指令可以来指定工作目录（或者称为当前目录），以后各层的当前目录就被改为指定的目录，如该目录不存在，<code>WORKDIR</code> 会帮你建立目录 </p>
<h3 id="USER-指定当前用户"><a href="#USER-指定当前用户" class="headerlink" title="USER 指定当前用户"></a>USER 指定当前用户</h3><p>格式：<code>USER &lt;用户名&gt;</code> </p>
<p><code>USER</code> 指令和 <code>WORKDIR</code> 相似，都是改变环境状态并影响以后的层。<code>WORKDIR</code> 是改变工作目录，<code>USER</code> 则是改变之后层的执行 <code>RUN</code>, <code>CMD</code> 以及 <code>ENTRYPOINT</code> 这类命令的身份 </p>
<h3 id="HEALTHCHECK-健康检查"><a href="#HEALTHCHECK-健康检查" class="headerlink" title="HEALTHCHECK 健康检查"></a>HEALTHCHECK 健康检查</h3><p><code>HEALTHCHECK</code> 指令是告诉 Docker 应该如何进行判断容器的状态是否正常 </p>
<p>格式： </p>
<ul>
<li>HEALTHCHECK [选项] CMD &lt;命令&gt;：设置检查容器健康状况的命令</li>
<li>HEALTHCHECK NONE：如果基础镜像有健康检查指令，使用这行可以屏蔽掉其健康检查指令 </li>
</ul>
<h3 id="ONBUILD"><a href="#ONBUILD" class="headerlink" title="ONBUILD"></a>ONBUILD</h3><p>格式：<code>ONBUILD &lt;其它指令&gt;</code> </p>
<p><code>NOBUILD</code>指令是别人定制镜像。即使用<code>FROM</code>的时候，才执行的命令 </p>
<h2 id="推送镜像"><a href="#推送镜像" class="headerlink" title="推送镜像"></a>推送镜像</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 先打标签</span></span><br><span class="line">docker tag ubuntu:17.10 username/ubuntu:17.10</span><br><span class="line"></span><br><span class="line"><span class="comment"># 在push</span></span><br><span class="line">docker push username/ubuntu:17.10</span><br></pre></td></tr></table></figure>
<h2 id="配置私有仓库"><a href="#配置私有仓库" class="headerlink" title="配置私有仓库"></a>配置私有仓库</h2><p><a href="https://docker_practice.gitee.io/repository/registry.html" target="_blank" rel="noopener">配置私有仓库</a> </p>
<h2 id="数据卷"><a href="#数据卷" class="headerlink" title="数据卷"></a>数据卷</h2><p><code>数据卷</code> 是一个可供一个或多个容器使用的特殊目录： </p>
<ul>
<li><code>数据卷</code>可以在容器之间共享和重用 </li>
<li>对 <code>数据卷</code> 的修改会立马生效 </li>
<li>对 <code>数据卷</code> 的更新，不会影响镜像</li>
<li><code>数据卷</code> 默认会一直存在，即使容器被删除 <blockquote>
<p>注意：数据卷 的使用，类似于 Linux 下对目录或文件进行 mount，镜像中的被指定为挂载点的目录中的文件会隐藏掉，能显示看的是挂载的 数据卷。 </p>
</blockquote>
</li>
</ul>
<h2 id="外部访问容器"><a href="#外部访问容器" class="headerlink" title="外部访问容器"></a>外部访问容器</h2><p>使用<code>- P</code>标记时，Docker会随机映射 <code>49000~49900</code> 的端口到内部容器开放的网络端口 </p>
<p><code>- p</code>可以指定要映射的端口，也可以指定地址<br><code>ip:hostPort:containerPort</code> </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 127.0.0.1:5000:5000 training/webapp python app.py</span><br></pre></td></tr></table></figure>
<h3 id="查看映射端口配置"><a href="#查看映射端口配置" class="headerlink" title="查看映射端口配置"></a>查看映射端口配置</h3><p><code>docker port</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker port nostalgic_morse 5000</span><br></pre></td></tr></table></figure></p>
<ul>
<li>容器有自己的内部网络和 ip 地址 </li>
<li><code>-p</code> 标记可以多次使用来绑定多个端口 </li>
</ul>
<h2 id="容器互联"><a href="#容器互联" class="headerlink" title="容器互联"></a>容器互联</h2><h3 id="查看已有网络"><a href="#查看已有网络" class="headerlink" title="查看已有网络"></a>查看已有网络</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network ls</span><br></pre></td></tr></table></figure>
<h3 id="新建网络"><a href="#新建网络" class="headerlink" title="新建网络"></a>新建网络</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker network create -d bridge my-net</span><br></pre></td></tr></table></figure>
<p><code>-d</code> 可以指定Docker网络类型，有<code>bridge</code>, <code>overlay</code>，其中 <code>overlay</code> 网络类型用于 <code>Swarm mode</code>(<strong>集群服务</strong>) </p>
<h3 id="连接容器"><a href="#连接容器" class="headerlink" title="连接容器"></a>连接容器</h3><p>运行一个容器并连接到新建的 <code>my-net</code> 网络<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">docker run -it --rm --name busybox1 --network my-net busybox sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 再运行一个容器</span></span><br><span class="line">docker run -it --rm --name busybox2 --network my-net busybox sh</span><br><span class="line"></span><br><span class="line"><span class="comment"># 测试连接</span></span><br><span class="line"><span class="comment"># 在busybox1 容器里，执行</span></span><br><span class="line"><span class="comment"># /ping busybox2</span></span><br><span class="line">PING busybox2 (172.19.0.3): 56 data bytes</span><br><span class="line">64 bytes from 172.19.0.3: seq=0 ttl=64 time=0.060 ms</span><br><span class="line">64 bytes from 172.19.0.3: seq=1 ttl=64 time=0.046 ms</span><br><span class="line">64 bytes from 172.19.0.3: seq=2 ttl=64 time=0.075 ms</span><br></pre></td></tr></table></figure></p>
<h1 id="Compose-项目"><a href="#Compose-项目" class="headerlink" title="Compose 项目"></a>Compose 项目</h1><p><code>Compose</code> 项目是 Docker 官方的开源项目，负责实现对 Docker 容器集群的快速编排。它允许用户通过一个单独的 <code>docker-compose.yml</code> 模板文件（YAML 格式）来定义一组相关联的应用容器为一个项目（project）。<br><code>Compose</code> 中有两个重要的概念： </p>
<ul>
<li><code>服务 (service)</code>：一个应用的容器，实际上可以包括若干运行相同镜像的容器实例。 </li>
<li><code>项目 (project)</code>：由一组关联的应用容器组成的一个完整业务单元，在 docker-compose.yml 文件中定义。 </li>
</ul>
<p><code>Compose</code> 的默认管理对象是<code>项目</code>，通过子命令对项目中的一组容器进行便捷地生命周期管理。</p>
<h2 id="Compose-命令说明"><a href="#Compose-命令说明" class="headerlink" title="Compose 命令说明"></a>Compose 命令说明</h2><h3 id="命令对象与格式"><a href="#命令对象与格式" class="headerlink" title="命令对象与格式"></a>命令对象与格式</h3><p><code>docker-compose</code> 命令的基本的使用格式是:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose [-f=&lt;arg&gt;...] [options] [COMMAND] [ARGS...]</span><br></pre></td></tr></table></figure></p>
<h3 id="命令选项"><a href="#命令选项" class="headerlink" title="命令选项"></a>命令选项</h3><ul>
<li>-f, –file FILE 指定使用的 Compose 模板文件，默认为 docker-compose.yml，可以多次指定。 </li>
<li>-p, –project-name NAME 指定项目名称，默认将使用所在目录名称作为项目名。 </li>
<li>–x-networking 使用 Docker 的可拔插网络后端特性 </li>
<li>–x-network-driver DRIVER 指定网络后端的驱动，默认为 bridge </li>
<li>–verbose 输出更多调试信息。 </li>
<li>-v, –version 打印版本并退出 </li>
</ul>
<h3 id="命令使用说明"><a href="#命令使用说明" class="headerlink" title="命令使用说明"></a>命令使用说明</h3><p><strong>Tips</strong>: 这里的<code>service name</code>是指<code>服务</code>的名称，不是container name 或者 container id</p>
<h4 id="build"><a href="#build" class="headerlink" title="build"></a>build</h4><p>构建（重新构建）项目中的服务容器<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose build [options] [SERVICE...]</span><br></pre></td></tr></table></figure></p>
<p>服务容器一旦构建后，将会带上一个标记名，例如对于 web 项目中的一个 db 容器，可能是 web_db<br>选项包括：</p>
<ul>
<li><code>--force-rm</code> 删除构建过程中的临时容器 </li>
<li><code>--no-cache</code> 构建镜像过程中不使用 cache（这将加长构建过程） </li>
<li><code>--pull</code> 始终尝试通过 pull 来获取更新版本的镜像</li>
</ul>
<h4 id="config"><a href="#config" class="headerlink" title="config"></a>config</h4><p>验证 Compose 文件格式是否正确，若正确则显示配置，若格式错误显示错误原因 </p>
<h3 id="down"><a href="#down" class="headerlink" title="down"></a>down</h3><p>此命令将会停止 <code>up</code> 命令所启动的容器，并移除网络 </p>
<h3 id="exec"><a href="#exec" class="headerlink" title="exec"></a>exec</h3><p>进入指定的容器<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果执行/bin/bash失败，报错OCI runtime exec failed,是因为bash不存在，替换成sh   </span></span><br><span class="line"></span><br><span class="line">docker-compose <span class="built_in">exec</span> web /bin/sh</span><br></pre></td></tr></table></figure></p>
<h3 id="images"><a href="#images" class="headerlink" title="images"></a>images</h3><p>列出 Compose 文件中包含的镜像 </p>
<h3 id="kill"><a href="#kill" class="headerlink" title="kill"></a>kill</h3><p>格式为 <code>docker-compose kill [options] [SERVICE...]</code> </p>
<p>通过发送 SIGKILL 信号来强制停止服务容器 </p>
<p>支持通过 -s 参数来指定发送的信号，例如通过如下指令发送 SIGINT 信号</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose <span class="built_in">kill</span> -s SIGINT</span><br></pre></td></tr></table></figure>
<h3 id="logs"><a href="#logs" class="headerlink" title="logs"></a>logs</h3><p>查看服务容器的输出。<br>默认情况下，docker-compose 将对不同的服务输出使用不同的颜色来区分。可以通过 –no-color 来关闭颜色。  </p>
<p>格式为：<code>docker-compose logs [options] [SERVICE...]</code> </p>
<h3 id="pause"><a href="#pause" class="headerlink" title="pause"></a>pause</h3><p>暂停服务<br>格式为：<code>docker-compose pause [SERVICE...]</code> </p>
<h3 id="port"><a href="#port" class="headerlink" title="port"></a>port</h3><p>打印某个容器端口所映射的公共端口 </p>
<p>格式为 <code>docker-compose port [options] SERVICE PRIVATE_PORT</code> </p>
<p>选项：</p>
<ul>
<li>–protocol=proto 指定端口协议，tcp（默认值）或者 udp。</li>
<li>–index=index 如果同一服务存在多个容器，指定命令对象容器的序号（默认为 1） </li>
</ul>
<h3 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h3><h3 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h3><h3 id="push"><a href="#push" class="headerlink" title="push"></a>push</h3><h3 id="restart"><a href="#restart" class="headerlink" title="restart"></a>restart</h3><h3 id="stop"><a href="#stop" class="headerlink" title="stop"></a>stop</h3><h3 id="rm"><a href="#rm" class="headerlink" title="rm"></a>rm</h3><h3 id="run"><a href="#run" class="headerlink" title="run"></a>run</h3><p>格式为 <code>docker-compose run [options] [-p PORT...] [-e KEY=VAL...] SERVICE [COMMAND] [ARGS...]</code><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose run ubuntu ping docker.com</span><br></pre></td></tr></table></figure></p>
<p>默认情况下，如果存在关联，则所有关联的服务将会自动被启动，除非这些服务已经在运行中。</p>
<p>该命令类似启动容器后运行指定的命令，相关卷、链接等等都将会按照配置自动创建。</p>
<p>两个不同点：</p>
<p>给定命令将会覆盖原有的自动运行命令；</p>
<p>不会自动创建端口，以避免冲突。</p>
<p>如果不希望自动启动关联的容器，可以使用 –no-deps 选项，例如:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose run --no-deps web python manage.py shell</span><br></pre></td></tr></table></figure></p>
<p>将不会启动 web 容器所关联的其它容器. </p>
<p>选项：</p>
<ul>
<li>-d 后台运行容器。</li>
<li>–name NAME 为容器指定一个名字。</li>
<li>–entrypoint CMD 覆盖默认的容器启动指令。</li>
<li>-e KEY=VAL 设置环境变量值，可多次使用选项来设置多个环境变量。</li>
<li>-u, –user=”” 指定运行容器的用户名或者 uid。</li>
<li>–no-deps 不自动启动关联的服务容器。</li>
<li>–rm 运行命令后自动删除容器，d 模式下将忽略。</li>
<li>-p, –publish=[] 映射容器端口到本地主机。</li>
<li>–service-ports 配置服务端口并映射到本地主机。</li>
<li>-T 不分配伪 tty，意味着依赖 tty 的指令将无法运行。 </li>
</ul>
<h3 id="scale"><a href="#scale" class="headerlink" title="scale"></a>scale</h3><p>设置指定服务运行的容器个数 </p>
<p>格式为 <code>docker-compose scale [options] [SERVICE=NUM...]</code> </p>
<p>通过 <code>service=num</code> 的参数来设置数量。例如：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose scale web=3 db=2</span><br></pre></td></tr></table></figure></p>
<p>一般的，当指定数目多于该服务当前实际运行容器，将新创建并启动容器；反之，将停止容器。 </p>
<h3 id="top"><a href="#top" class="headerlink" title="top"></a>top</h3><h3 id="unpause"><a href="#unpause" class="headerlink" title="unpause"></a>unpause</h3><p>启动已暂停的服务 </p>
<h3 id="up"><a href="#up" class="headerlink" title="up"></a>up</h3><p>格式为 <code>docker-compose up [options] [SERVICE...]</code> </p>
<p>该命令十分强大，它将尝试自动完成包括构建镜像，（重新）创建服务，启动服务，并关联服务相关容器的一系列操作 </p>
<p>链接的服务都将会被自动启动，除非已经处于运行状态 </p>
<p>默认情况，<code>docker-compose up</code> 启动的容器都在前台，控制台将会同时打印所有容器的输出信息，可以很方便进行调试 </p>
<p>如果使用 <code>docker-compose up -d</code>，将会在后台启动并运行所有的容器。一般推荐生产环境下使用该选项。 </p>
<p>选项：</p>
<ul>
<li>-d 在后台运行服务容器。</li>
<li>–no-color 不使用颜色来区分不同的服务的控制台输出。</li>
<li>–no-deps 不启动服务所链接的容器。</li>
<li>–force-recreate 强制重新创建容器，不能与 –no-recreate 同时使用。</li>
<li>–no-recreate 如果容器已经存在了，则不重新创建，不能与 –force-recreate 同时使用。</li>
<li>–no-build 不自动构建缺失的服务镜像。</li>
<li>-t, –timeout TIMEOUT 停止容器时候的超时（默认为 10 秒）</li>
</ul>
<h2 id="Compose-模板文件"><a href="#Compose-模板文件" class="headerlink" title="Compose 模板文件"></a>Compose 模板文件</h2><p>模板文件是使用 Compose 的核心，涉及到的指令关键字也比较多。但大家不用担心，这里面大部分指令跟 docker run 相关参数的含义都是类似的。 </p>
<p>默认的模板文件名称为 docker-compose.yml，格式为 YAML 格式。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">'3'</span></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">  webapp:</span><br><span class="line">    build:</span><br><span class="line">      context: ./dir</span><br><span class="line">      dockerfile: Dockerfile-alternate</span><br><span class="line">      args:</span><br><span class="line">        buildno: 1</span><br></pre></td></tr></table></figure></p>
<p>注意每个服务都必须通过 <code>image</code> 指令指定镜像或 <code>build</code> 指令（需要 Dockerfile）等来自动构建生成镜像 </p>
<p>如果使用 <code>build</code> 指令，在 <code>Dockerfile</code> 中设置的选项(例如：CMD, EXPOSE, VOLUME, ENV 等) 将会自动被获取，无需在 docker-compose.yml 中再次设置。 </p>
<h3 id="build-1"><a href="#build-1" class="headerlink" title="build"></a>build</h3><p>指定 Dockerfile 所在文件夹的路径（可以是绝对路径，或者相对 docker-compose.yml 文件的路径）。 Compose 将会利用它自动构建这个镜像，然后使用这个镜像。 </p>
<p>可以使用 <code>context</code> 指令指定 Dockerfile 所在文件夹的路径 </p>
<p>使用 <code>dockerfile</code> 指令指定 Dockerfile 文件名 </p>
<p>使用 <code>arg</code> 指令指定构建镜像时的变量 </p>
<p>使用 <code>cache_from</code> 指定构建镜像的缓存<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">build:</span><br><span class="line">  context: .</span><br><span class="line">  cache_from:</span><br><span class="line">    - alpine:latest</span><br><span class="line">    - corp/web_app:3.14</span><br></pre></td></tr></table></figure></p>
<h3 id="cap-add-cap-drop"><a href="#cap-add-cap-drop" class="headerlink" title="cap_add, cap_drop"></a>cap_add, cap_drop</h3><p>指定容器的内核能力（capacity）分配 </p>
<h3 id="command"><a href="#command" class="headerlink" title="command"></a>command</h3><p>覆盖容器启动后默认执行的命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span>: <span class="built_in">echo</span> <span class="string">"hello world"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="container-name"><a href="#container-name" class="headerlink" title="container_name"></a>container_name</h3><p>指定容器名称。默认将会使用 <code>项目名称_服务名称_序号</code> 这样的格式<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">container_name: docker-web-container</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>注意: 指定容器名称后，该服务将无法进行扩展（scale），因为 Docker 不允许多个容器具有相同的名称 </p>
</blockquote>
<h3 id="devices"><a href="#devices" class="headerlink" title="devices"></a>devices</h3><p>指定设备映射关系。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">devices:</span><br><span class="line">  - <span class="string">"/dev/ttyUSB1:/dev/ttyUSB0"</span></span><br></pre></td></tr></table></figure></p>
<h3 id="depends-on"><a href="#depends-on" class="headerlink" title="depends_on"></a>depends_on</h3><p>解决容器的依赖、启动先后的问题。<br>以下例子中会先启动 redis db 再启动 web<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">'3'</span></span><br><span class="line"></span><br><span class="line">services:</span><br><span class="line">  web:</span><br><span class="line">    build: .</span><br><span class="line">    depends_on:</span><br><span class="line">      - db</span><br><span class="line">      - redis</span><br><span class="line"></span><br><span class="line">  redis:</span><br><span class="line">    image: redis</span><br><span class="line"></span><br><span class="line">  db:</span><br><span class="line">    image: postgres</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>注意：<code>web</code> 服务不会等待 <code>redis</code> <code>db</code> 「完全启动」之后才启动。 </p>
</blockquote>
<h3 id="dns"><a href="#dns" class="headerlink" title="dns"></a>dns</h3><p>自定义 <code>DNS</code> 服务器。可以是一个值，也可以是一个列表。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dns: 8.8.8.8</span><br><span class="line"></span><br><span class="line">dns:</span><br><span class="line">  - 8.8.8.8</span><br><span class="line">  - 114.114.114.114</span><br></pre></td></tr></table></figure></p>
<h3 id="env-file"><a href="#env-file" class="headerlink" title="env_file"></a>env_file</h3><p>从文件中获取环境变量，可以为单独的文件路径或列表。 </p>
<p>如果通过 <code>docker-compose -f FILE</code> 方式来指定 Compose 模板文件，则 env_file 中变量的路径会基于模板文件路径 </p>
<p>如果有变量名称与 environment 指令冲突，则按照惯例，以后者为准 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">env_file: .env</span><br><span class="line"></span><br><span class="line">env_file:</span><br><span class="line">  - ./common.env</span><br><span class="line">  - ./apps/web.env</span><br><span class="line">  - /opt/secrets.env</span><br></pre></td></tr></table></figure>
<p>环境变量文件中每一行必须符合格式，支持 # 开头的注释行。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># common.env: Set development environment</span></span><br><span class="line">PROG_ENV=development</span><br></pre></td></tr></table></figure></p>
<h3 id="environment"><a href="#environment" class="headerlink" title="environment"></a>environment</h3><p>设置环境变量。可以使用数组或字典两种格式 </p>
<p>只给定名称的变量会自动获取运行 Compose 主机上对应变量的值，可以用来防止泄露不必要的数据 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">environment:</span><br><span class="line">  RACK_ENV: development</span><br><span class="line">  SESSION_SECRET:</span><br><span class="line"></span><br><span class="line">environment:</span><br><span class="line">  - RACK_ENV=development</span><br><span class="line">  - SESSION_SECRET</span><br></pre></td></tr></table></figure>
<p>如果变量名称或者值中用到 true|false，yes|no 等表达 <code>布尔</code> 含义的词汇，最好放到引号里，避免 YAML 自动解析某些内容为对应的布尔语义。 </p>
<h3 id="expose"><a href="#expose" class="headerlink" title="expose"></a>expose</h3><p>暴露端口，但不映射到宿主机，只被连接的服务访问 </p>
<p>仅可以指定内部端口为参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">expose:</span><br><span class="line"> - <span class="string">"3000"</span></span><br><span class="line"> - <span class="string">"8000"</span></span><br></pre></td></tr></table></figure>
<h3 id="image"><a href="#image" class="headerlink" title="image"></a>image</h3><p>指定为镜像名称或镜像 ID </p>
<h3 id="读取变量"><a href="#读取变量" class="headerlink" title="读取变量"></a>读取变量</h3><p>Compose 模板文件支持动态读取主机的系统环境变量和当前目录下的 <code>.env</code> 文件中的变量。 </p>
<p>例如，下面的 Compose 文件将从运行它的环境中读取变量 <code>${MONGO_VERSION}</code> 的值，并写入执行的指令中。 </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">version: <span class="string">"3"</span></span><br><span class="line">services:</span><br><span class="line"></span><br><span class="line">db:</span><br><span class="line">  image: <span class="string">"mongo:<span class="variable">$&#123;MONGO_VERSION&#125;</span>"</span></span><br></pre></td></tr></table></figure>
<p>如果执行 <code>MONGO_VERSION=3.2</code> <code>docker-compose up</code> 则会启动一个 <code>mongo:3.2</code> 镜像的容器；如果执行 <code>MONGO_VERSION=2.8</code> docker-compose up 则会启动一个 <code>mongo:2.8</code> 镜像的容器。 </p>
<p>若当前目录存在 <code>.env</code> 文件，执行 docker-compose 命令时将从该文件中读取变量。</p>
<p>在当前目录新建 <code>.env</code> 文件并写入以下内容。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 支持 # 号注释</span></span><br><span class="line">MONGO_VERSION=3.6</span><br></pre></td></tr></table></figure></p>
<p>执行 docker-compose up 则会启动一个 <code>mongo:3.6</code> 镜像的容器。</p>
<h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="常见问题总结"><a href="#常见问题总结" class="headerlink" title="常见问题总结"></a>常见问题总结</h2><p><a href="https://docker_practice.gitee.io/appendix/faq/" target="_blank" rel="noopener">常见问题总结</a></p>
<h2 id="资源链接"><a href="#资源链接" class="headerlink" title="资源链接"></a>资源链接</h2><p><a href="https://docker_practice.gitee.io/appendix/resources/" target="_blank" rel="noopener">资源链接</a> </p>
<h2 id="进阶深入"><a href="#进阶深入" class="headerlink" title="进阶深入"></a>进阶深入</h2><p>进阶深入，参考原文档<a href="https://docker_practice.gitee.io/" target="_blank" rel="noopener">《Docker — 从入门到实践》</a></p>

        </div>

        <blockquote class="post-copyright">
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-06-07T12:56:30.005Z" itemprop="dateUpdated">2018-06-07 20:56:30</time>
</span><br>


        
        原文链接：<a href="/2018/06/07/dokcer入门篇/" target="_blank" rel="external">https://pengwenwu.github.io/2018/06/07/dokcer入门篇/</a>
        
    </div>
    <footer>
        <a href="https://pengwenwu.github.io">
            <img src="/img/avatar.jpg" alt="pengwenwu">
            pengwenwu
        </a>
    </footer>
</blockquote>

        


        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://pengwenwu.github.io/2018/06/07/dokcer入门篇/&title=《dokcer入门篇》 — Pena's Blog&pic=https://pengwenwu.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://pengwenwu.github.io/2018/06/07/dokcer入门篇/&title=《dokcer入门篇》 — Pena's Blog&source=pengwenwu的个人博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://pengwenwu.github.io/2018/06/07/dokcer入门篇/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《dokcer入门篇》 — Pena's Blog&url=https://pengwenwu.github.io/2018/06/07/dokcer入门篇/&via=https://pengwenwu.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://pengwenwu.github.io/2018/06/07/dokcer入门篇/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between">
  
    <div class="waves-block waves-effect prev">
      <a href="/2018/06/10/git子模块/" id="post-prev" class="post-nav-link">
        <div class="tips"><i class="icon icon-angle-left icon-lg icon-pr"></i> Prev</div>
        <h4 class="title">git子模块</h4>
      </a>
    </div>
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/05/25/js和php闭包使用和区别/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">js和php闭包使用和区别</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'false' == 'true',
            verify: 'true' == 'true',
            appId: "U2qzDNI480QyyzN2kDGB7bGu-gzGzoHsz",
            appKey: "6o2PFFkLctFMxXg3qBrhr0CF",
            avatar: "retro",
            placeholder: "要不要说点什么？",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->




</article>



</div>

        <footer class="footer">
    <div class="top">
        
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span>博客内容遵循 <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">知识共享 署名 - 非商业性 - 相同方式共享 4.0 国际协议</a></span>
        </p>
    </div>
    <div class="bottom">
        <p><span>pengwenwu &copy; 2017 - 2018</span>
            <span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=https://pengwenwu.github.io/2018/06/07/dokcer入门篇/&title=《dokcer入门篇》 — Pena's Blog&pic=https://pengwenwu.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=https://pengwenwu.github.io/2018/06/07/dokcer入门篇/&title=《dokcer入门篇》 — Pena's Blog&source=pengwenwu的个人博客" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=https://pengwenwu.github.io/2018/06/07/dokcer入门篇/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《dokcer入门篇》 — Pena's Blog&url=https://pengwenwu.github.io/2018/06/07/dokcer入门篇/&via=https://pengwenwu.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=https://pengwenwu.github.io/2018/06/07/dokcer入门篇/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACJ0lEQVR42u3aQXKDMAwF0Nz/0um2WcTzJZG02I8VQ8D40RnVkvx4xMfz17G+J79/8lTzwMDAuC3juTySe9ZPzUdY34OBgXEOIwmF6xC8Dp2TK+u5YWBgYCTnSbh8d39yHQMDA6PHiJZrceL6ZwEXAwPjVoxqOpqPkBfdvpSLY2Bg3JAxD5GfO/9IfwMDA+NWjF6xvhc0r53Jy1swMDC2ZvRe07uz2uAsvwUDA2NTxvqx9dDVX/Oi3rvRmt8YAwPj5oxrJz0J2cnICRgDA2M/xnzovA2ZhOBmqMXAwNiacW17IC+xTZaDF8AwMDBuxVgHx15RLFqHxm+Pin0YGBgHMKoBtJof5x8rT2JfrmBgYBzGWKeayRKwN2ZvAwcGBsY5jGq7sZdwTj5HtFsEAwNja0Z+nk8u3+DVK7FhYGCcyeg1KfNJ50W6cqMUAwNja8a1Wyvy1Hc98uijYGBgbMrIF4XVlDXfIlZNmN/+HTAwMLZmVEtm0TaIQRpcXThiYGCcycgnN0lrk0ActT8xMDCOYeSbt5Ij+RzJojBqM2BgYBzJmBxJCnoVDwMDY2/GPID2lpWTUl0UajEwMDZi9IJdApus3PLNamUYBgbGbRnzIFttdn4CjIGBcQKj17zsle3yMF1AYmBgYBRJ+eaM3rawcvzGwMA4jJFPsVeAS0Lzl/5vYGBg/DNGdWNWL2gmrc086GNgYJzD6LUYe6X83paLahMCAwNjI8YPwQYD8ewgC6UAAAAASUVORK5CYII=" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: false };


</script>

<script src="/js/main.min.js?v=1.7.1"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="/js/search.min.js?v=1.7.1" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '死鬼去哪里了！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
